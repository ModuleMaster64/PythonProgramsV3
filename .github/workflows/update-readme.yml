name: ðŸ§  Update README Stats

on:
  push:
    branches: [main]
  schedule:
    - cron: '*/50 * * * *'  # Runs every 50 minutes!

jobs:
  update-readme:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repo
      uses: actions/checkout@v3

    - name: Count Python files and lines
      run: |
        PY_FILES=$(find . -name "*.py" | wc -l)
        TOTAL_LINES=$(find . -name "*.py" -exec cat {} + | wc -l)
        echo "ðŸ“„ Total lines of code: $TOTAL_LINES" > stats.txt
        echo "ðŸ Number of Python files: $PY_FILES" >> stats.txt
        echo "ðŸ•’ Last updated: $(date -u +"%Y-%m-%d %H:%M UTC")" >> stats.txt
        cat stats.txt > README.md

    - name: Commit changes
      run: |
        git config --global user.name "GitHub Actions Bot"
        git config --global user.email "actions@github.com"
        git add README.md
        TIMESTAMP=$(date -u +"%Y-%m-%d %H:%M UTC")
        git commit --allow-empty -m "ðŸ§  Update README stats [$TIMESTAMP]"
        git push
